1. 관계 (Relationship) 
    1) 정의
        - 엔터티끼리 상호 연관성이 있는 상태
        - 엔터티 간 논리적인 연관성을 의미 
        - 예
            - 부서 엔터티와 사원 엔터티의 관계 => 존재에 의한 관계
            - 고객 엔터티와 주문 엔터티의 관계 => 행위에 의한 관계 

    2) 관계의 패어링 (Relationship Pairing)
        - 엔터티 내의 인스턴스가 개별적으로 관계를 가지는 것    

    3) 관계의 표기법 
        - 2개의 엔터티 간 관계에서 
          참여자의 수를 표현하는 것을 관계 차수(Cardinality)라고 함
        - 가장 일반적인 관계 차수 표현방법
            - 관계 차수 - 1:1 관계              
                - 예) 한 명의 사원은 단 한 개의 병역사항을 가진다 
            - 관계 차수 - 1:M 관계 
                - 예) 한 명의 사원은 한 부서에 소속되고 
                      한 부서는 여러 사원을 포함한다.   
            - 관계 차수 - M:M 관계 
                - 예) 주문은 여러 제품을 포함할 수 있고 
                      제품도 여러 주문에 의해 주문될 수 있다        

    4) 관계 선택사양 (Optionality)                                    
        - 필수참여관계
            - 필수적 관계
            - 실선으로 표현
            - 예) 지하철역승하차는 지하철역번호가 반드시 존재한다 
        - 선택참여관계
            - 선택적 관계
            - 점선으로 선택적 관계 표현 
            - 예) 지하철역은 지하철역승하차 정보가 있을수도 없을수도 있다

    5) 관계정의 
        - 체크사항
            - 2개의 엔터티 사이에 관심있는 연관 규칙이 존재하는가?
            - 2개의 엔터티 사이에 정보의 조합이 발생하는가?
            - 관계 연결을 가능하게 하는 동사(Verb)가 있는가?
        - 예) 
            -           기준엔터티  관계차수    대상엔터티  필수/선택   관계명 
              --------------------------------------------------------------
                        고객은     여러 개의     주문을      때때로    주문한다
                        주문은     한명의        고객을      반드시     가진다 

2. 식별자 (Identifier)  
    1) 개념 
        - 엔터티의 각 인스턴스를 개별적으로 식별하기 위해 사용되는 
          하나의 속성 혹은 속성들의 조합을 식별자라고 함.
        - 엔터티 내에서 하나의 행을 콕 집어낼 때 사용하는 것임.
        - 집합내에서 단 하나의 인스턴스를 구별해 낼 수 있는 논리적인 이름이 필요하며 
          이러한 구분자를 식별자라함 
    2) 예
        - 고객 (고객번호)
        - 사원 (사원번호) 
        - 주문 (주문번호)
        - 상품 (상품번호)

    3) 특징 
        - 유일성
            - 유일하게 구분할 수 있음
            - 예) 사원 엔터티의 사원번호 속성은 주식별자임.
                  사원번호는 모든 직원들에 대해 개인별로 고유하게 부여됨.
        - 최소성 
            - 주식별자를 구성하는 속성의 수는 최소한의 수로 이루어져 함 
            - 예) 사원분류코드 + 사원번호 조합으로 식별자 구성 => 부적절한 주식별자

        - 불변성 
            - 주식별자가 한 번 정해지면 그 값은 변하지 말아야 함     

        - 존재성 
            - 주식별자가 지정되면 반드시 데이터 값이 존재해야 함 
              (Not Null)  
            - 주식별자는 NULL을 허용하지 않음   

    4) 식별자 분류 
        - 대표성 여부 
            - 주 식별자
                - 각각의 행을 구분할 수 있는 구분자 
                - 예) 사원번호, 고객번호 
            - 보조 식별자                
                - 각각의 행을 구분할수 있음 
                - 예) 주민등록번호       

        - 스스로 생성여부 
            - 내부 식별자 
                - 엔터티 내부에서 스스로 만들어지는 식별자임
                - 예) 사원번호, 고객번호 
            - 외부 식별자 
                - 다른 엔터티와의 관계를 통해 다른 엔터티로부터 받아오는 식별자임
                - 예) 주문 엔터티의 고객번호           

        - 속성의 수 
            - 단일식별자 
                - 하나의 속성으로 구성된 식별자
            - 복합식별자                       
                - 둘 이상의 속성으로 구성된 식별자 
                - 예) 주문상세 엔터티의 주문번호 + 상세순번

        - 대체여부 
            - 본질 식별자
                - 비즈니스에 의해 만들어지는 식별자 
            - 인조 식별자                           
                - 인위적으로 만든 식별자 
                - 예) 고객번호 + 주문순번        

        - 예)
             엔터티             속성              식별자 분류
            -----------------------------------------------------------------------
             부서             부서번호            주식별자,내부식별자,단일식별자,인조식별자  
             사원             사원번호            주식별자,내부식별자,단일식별자,본질식별자    
                              부서번호            외부식별자 
                              주민등록번호         보조식별자
             교육이력          사원번호 + 수강일자  주식별자,복합식별자,본질식별자
             구매신청          구매신청번호         주식별자,단일식별자,인조식별자

    5) 식별자 도출 기준
        - 비즈니스에서 자주 이용하는 속성을 주식별자로 지정
        - 명칭, 장소와 같이 이름으로 기술 되는 속성은 가능하면 
          주식별자로 하지 않아야 함
        - 주식별자를 복합식별자로 할 경우 
          지나치게 많은 속성이 포함되지 않도록 함    

    6) 식별자 관계와 비식별자 관계   
        - 자식 엔터티에서 부모 엔터티로부터 받은 외부 식별자를 
          자신의 주식별자로 이용할 것인지(식별자 관계)

        - 자식 엔터티에서 부모 엔터티로부터 받은 외부 식별자를 
          부모와 연결이 되는 속성으로서만 이용할 것인지(비식별자 관계)를 

          결정해야 함.

        - 식별자 관계
            - 부모 엔터터의 식별자인 부모번호 속성을 
              자식 엔터티가 식별자로 사용하고 있음.
            - 자식 입장에서 외부식별자(FK)를 자신의 식별자로 
              사용하고 있는 것을 식별자 관계라고 함.        

        - 비식별자 관계
            - 부모 엔터티의 식별자인 부모번호 속성이 
              자식 엔터티의 식별자로 사용되지 않고 있음.
            - 자식 엔터티의 식별자는 자식번호이고 
              부모 번호 속성은 외부식별자(FK)로만 존재함 
            - 자식 엔터티 입장에서 외부식별자(FK)를 자신의 식별자로
              사용하고 있지 않은 것을 비식별자 관계라고 함.

        - 식별자 관계를 사용할지 비식별자 관계를 사용할지는  
          업무 특징, 자식 엔터티의 주식별자의 구성, SQL 작성 전략에
          의해 결정함.

        - 식별자 관계 ERD에 방문접수, 인터넷접수, 전화접수 엔터티가 있음.
          이 3개의 엔터티가 비식별자 관계 엔터티에서는 접수 엔터티로 
          통합됨. 접수 엔터티로 통합되면서 비식별자 관계가 된 것임을 알수 있음.

        - 식별자 관계로만 설정한 경우 
            - SQL문의 복잡성이 올라가고 조건이 누락되는 실수가 발생할 
              확률이 높아짐 
            - 관계가 도출될 때마다 PK 속성의 수가 지속적으로 증가하게 됨.
            - SQL문 개발시 필연적으로 테이블간의 조인을 하게 되며 
              조인에 참여하는 식별자 속성의 개수가 많을 경우 SQL문의 
              복잡도가 올라감 => 조인 조건을 누락하는 실수가 발생.

     7) 비식별자 관계를 고려해야 하는 경우 

        - 관계 분석 ==> 관계의 강/약 분석 ==> 약한 관계 ==> 비 식별자 관계 고려

                                        ==> 자식 엔터티(테이블) 독립 PK 필요 ==> 독립 PK 구성 ==> 비 식별자 관계 고려

                                        ==> SQL 복잡성 증가 (개발 생산성 하락) ==> PK속성 단순화 ==> 비 식별자 관계 고려

     8) 
                    식별자 관계                          비식별자 관계
       ===============================================================================
       목적         강한 연결 관계를 표현함             약한 연결 관계를 표현함   
       -------------------------------------------------------------------------------
       자식         부모 엔터티의 주식별자 속성이       부모엔터티의 주식별자 속성이
       주식별자      자식 엔터티의 주식별자의 구성에     자식엔터티의 일반 속성이 됨
       영향          포함됨 
       --------------------------------------------------------------------------------
       연결         *부모 엔터티에 종속되는 경우에       *부모/자식 간 약한 종속관계인 경우에 
       고려사항     사용                               사용
                    *자식 엔터티의 주식별자구성에        *자식 엔터티의 주식별자 구성을 
                    부모엔터티의 주식별자 속성이          독립적으로 구성할 경우에 사용 
                    필요한 경우에 사용  
                    
